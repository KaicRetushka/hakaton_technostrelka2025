<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=126279f8-7d73-4da9-a3e6-369f3c5d0f2f&lang=ru_RU"
        type="text/javascript"></script>
    <script src="https://unpkg.com/htmx.org@1.9.3"></script>
</head>
<body>
    
    {% if is_admin%}

    <div class="map">
        <div id="map" style="width: 100%; height: 400px;"></div>
    </div>

    <div hidden>
        <p>Название ориг</p>
        <input id="info_title_orig" value="{{ metka_info.title }}"></input>
    </div>

        <div hidden>
            <p>id</p>
            <input id="info_id" value="{{ metka_info.id }}"></input>
        </div>

        <div hidden>
            <p>x_coor</p>
            <input id="info_x_coor" value="{{ metka_info.x_coor }}"></input>
        </div>

        <div hidden>
            <p>y_coor</p>
            <input id="info_y_coor" value="{{ metka_info.y_coor }}"></input>
        </div>

        <div id="cancel_change" hidden>
            <button id="cancelСhangeCoords">Отменить</button>
        </div> 

        <div id="okCangeCoords">
            <button id="changeCoords">Поменять координаты</button>
        </div>

        <div>
            <p>Название</p>
            <input id="info_title" value="{{ metka_info.title }}"></input>
        </div>

        <div>
            <p>Описание</p>
            <input id="info_description" value="{{ metka_info.description }}"></input>
        </div>

        <div>
            <p>Фотографии</p>

            <label class="file-input" for="photo_mark_input"></label>
            <div id="not_galary" class="custom-file-input">
                <div id="gallery">
                    {%for photo in metka_info.photos%}
                        <img src="data:image/jpg;base64,{{ photo }}" alt="" style="height: 100px; width: 100px;">
                    {%endfor%}
                </div>
                <input id="photo_mark_input" type="file" accept="image/*" multiple><br>
            </div>
        </div>

        <dialog id="deleteMarkDialog">
            <h1>Вы уверены, что хотите удалить метку?</h1>
            <div>
                <button id="cancelDeleteMark" type="button">Отмена</button>
                <!-- Изменил id кнопки удаления внутри диалога -->
                <button id="confirmDeleteMark" type="submit" hx-delete="/metka/{{ metka_info.id }}" hx-swap="none">Удалить метку</button>
            </div>
        </dialog>
        
        <br>
        <button id="backToGlav" onclick="location.href='/'">Назад</button>
        <!-- Эта кнопка теперь открывает диалог -->
        <button id="openDeleteDialog" type="button">Удалить метку</button>
        <button id="saveChange">Сохранить</button>

        <script src="/static/js/metka_info_admin.js"></script>
    
    {% else %}
        
        <div class="map">
            <div id="map" style="width: 100%; height: 400px;"></div>
        </div>

        <div hidden>
            <p>x_coor</p>
            <div id="info_x_coor">{{ metka_info.x_coor }}</div>
        </div>

        <div hidden>
            <p>y_coor</p>
            <div id="info_y_coor">{{ metka_info.y_coor }}</div>
        </div>

        <div>
            <h1>Название</h1>
            <div id="metka_info_title">{{ metka_info.title }}</div>
        </div>

        <div>
            <h1>Описание</h1>
            <div>{{ metka_info.description }}</div>
        </div>

        <div>
            <h1>Фотографии</h1>
            <div>
                {%for photo in metka_info.photos%}
                    <img src="data:image/jpg;base64,{{ photo }}" alt="" style="height: 100px; width: 100px;">
                {%endfor%}
            </div>
        </div>

        <button id="backToGlav" onclick="location.href='/'">Назад</button>

        <script src="/static/js/metka_info_user.js"></script>

    {% endif %}

</body>
</html>